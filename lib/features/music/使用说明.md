# 音乐页面使用说明

## 🎵 为什么看不到音乐？

音乐页面需要**三个步骤**才能显示音乐：

### 步骤 1：添加音乐集合

1. 进入音乐页面的 **"集合"** 分段
2. 点击底部的 **"添加集合"** 按钮
3. 输入包含音乐文件的集合 BID（32位块ID）
4. 点击保存

### 步骤 2：标记为播放列表

添加集合后，需要将其标记为播放列表：

1. 在集合列表中 **长按** 你想要播放的集合
2. 在弹出的菜单中选择 **"加入播放列表"**
3. 集合会显示 **"已加入播放"** 标签

### 步骤 3：查看音乐

1. 切换到 **"播放"** 分段
2. 系统会自动加载所有标记为播放列表的集合中的音乐
3. 点击音乐项开始播放

## 📋 常见问题

### Q: 为什么"播放"页面显示"还没有加入播放列表"？

**A:** 你添加了集合，但还没有将其标记为播放列表。长按集合，选择"加入播放列表"即可。

### Q: 为什么"播放"页面显示"播放列表中暂无音乐"？

**A:** 可能的原因：
- 集合中没有音乐文件
- 集合中的文件不是支持的音频格式
- 网络连接问题，无法加载数据

### Q: 支持哪些音频格式？

**A:** 目前支持以下格式：
- `.mp3`
- `.m4a`
- `.aac`
- `.ogg`
- `.wav`
- `.flac`

### Q: 如何移除播放列表中的集合？

**A:** 长按集合，选择"从播放列表移除"。注意：这不会删除集合，只是将其从播放列表中移除。

### Q: 如何删除集合？

**A:** 长按集合，选择"删除集合"。这会完全删除该集合的本地记录。

## 🎨 界面说明

### 播放页面

- **序号/播放图标**：正在播放的音乐会显示动态图标
- **封面**：显示音乐封面（如果有）
- **标题和艺术家**：音乐的基本信息
- **时长**：音乐的播放时长
- **更多按钮**：点击查看更多操作选项

### 集合页面

- **集合卡片**：显示集合标题和简介
- **"已加入播放"标签**：标记为播放列表的集合会显示此标签
- **点击**：选中/取消选中集合
- **长按**：显示操作菜单

### 底部播放器

- 只在有音乐播放时显示
- 显示当前播放的音乐信息
- 提供播放/暂停、上一首/下一首控制

## 🔧 调试信息

如果遇到问题，查看控制台日志：

```
[MusicPlayPage] 总集合数: X
[MusicPlayPage] 播放列表集合数: X
[MusicPlayPage] 查询 BID: [...]
[MusicPlayPage] 提取到 X 个块
[MusicPlayPage] 转换为 X 个音乐项
```

这些日志可以帮助你了解：
- 是否成功添加了集合
- 是否标记了播放列表
- 是否成功加载了音乐数据

## 💡 使用技巧

1. **批量管理**：可以添加多个集合，根据需要加入或移除播放列表
2. **集合分类**：可以创建不同主题的音乐集合（如"流行音乐"、"古典音乐"等）
3. **快速切换**：在集合页面可以快速切换不同的播放列表

## ⚠️ 注意事项

1. 音乐文件通过 IPFS CID 标识，需要确保网络连接正常
2. 集合 BID 必须是有效的 32 位块 ID
3. 当前版本仅提供 UI 框架，实际音频播放需要额外集成音频库
4. 数据保存在本地，卸载应用会丢失集合配置

